<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Os mais mais</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome & Google Fonts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Roboto', sans-serif; 
            background-color: #121212; 
            color: #e3e3e3; 
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        .google-font { font-family: 'Google Sans', sans-serif; }

        ::-webkit-scrollbar { width: 0px; background: transparent; }
        
        /* Surface Google Style */
        .surface-card {
            background-color: #1E1E1E;
            border-radius: 28px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Inputs Arredondados */
        .google-input {
            background-color: #2d2d2d;
            border: 1px solid transparent;
            border-radius: 9999px;
            transition: all 0.2s;
        }
        .google-input:focus {
            background-color: #353535;
            border-color: #3b82f6; /* Blue Focus */
            color: #ffffff;
        }

        /* Gradientes Azul e Rosa */
        .gradient-btn {
            background: linear-gradient(135deg, #3b82f6, #ec4899);
            color: white;
            border: none;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        .gradient-btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #3b82f6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Destaque Est√∫dio 34 */
        .studio-highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(236, 72, 153, 0.15));
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        /* Anima√ß√µes */
        .fade-in-up { animation: fadeInUp 0.4s cubic-bezier(0.0, 0.0, 0.2, 1); }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .scale-pop { animation: scalePop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes scalePop { from { transform: scale(0.9); } to { transform: scale(1); } }
    </style>
</head>
<body class="h-screen w-screen relative">
    <div id="root" class="h-full w-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- CONFIGURA√á√ÉO ---
        const ADMIN_CREDENTIALS = { "lucas": "mestre123", "barbara": "rainha123" };
        const ADMIN_DISPLAY_NAMES = { "lucas": "Lucas", "barbara": "Barbara" };
        const ADMIN_NAMES_LOWER = Object.keys(ADMIN_CREDENTIALS);
        
        const PLANS = {
            free: { name: 'B√°sico', limit: 50 * 1024 * 1024, label: '50 MB', price: 0, color: 'text-gray-400' },
            vip: { name: 'VIP', limit: 5 * 1024 * 1024 * 1024, label: '5 GB', price: 50, color: 'text-blue-400' },
            king: { name: 'King', limit: 40 * 1024 * 1024 * 1024, label: '40 GB', price: 100, color: 'text-pink-400' }
        };

        const MAINTENANCE_TYPES = {
            emergency: { label: "Emerg√™ncia Geral", icon: "fa-triangle-exclamation", color: "text-red-500" },
            auth: { label: "Autoriza√ß√£o", icon: "fa-shield-halved", color: "text-blue-500" },
            bugfix: { label: "Corre√ß√£o de Bugs", icon: "fa-bug", color: "text-yellow-500" },
            update: { label: "Atualiza√ß√£o", icon: "fa-bolt", color: "text-purple-500" }
        };

        const generateId = () => Math.random().toString(36).substr(2, 9);
        const formatTime = () => new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
        const formatDate = () => new Date().toLocaleDateString('pt-BR');
        const formatFullDate = () => `${formatDate()} √†s ${formatTime()}`;

        function App() {
            const [users, setUsers] = useState(() => JSON.parse(localStorage.getItem('users')) || []);
            const [chats, setChats] = useState(() => JSON.parse(localStorage.getItem('chats')) || {});
            // INCLU√çDO 'news' no estado inicial
            const [system, setSystem] = useState(() => JSON.parse(localStorage.getItem('system')) || { maintenance: false, maintenanceType: 'emergency', globalMsg: '', supportMsgs: [], securityLogs: [], news: [] });
            const [currentUser, setCurrentUser] = useState(null);
            const [view, setView] = useState('login'); 
            const [notifications, setNotifications] = useState([]);

            // Sincroniza√ß√£o e Vigilante
            useEffect(() => {
                const sync = () => {
                    const sys = JSON.parse(localStorage.getItem('system')) || { maintenance: false };
                    setSystem(sys);
                    setUsers(JSON.parse(localStorage.getItem('users')) || []);
                    setChats(JSON.parse(localStorage.getItem('chats')) || {});
                };
                window.addEventListener('storage', sync);
                
                const watcher = setInterval(() => {
                    const currentSys = JSON.parse(localStorage.getItem('system'));
                    if (currentSys && currentSys.maintenance) {
                        setSystem(currentSys);
                        if (currentUser && !currentUser.isAdmin) {
                            setView('maintenance');
                        } else if (!currentUser && view === 'login') {
                            setView('maintenance');
                        }
                    } else if (currentSys && !currentSys.maintenance && view === 'maintenance') {
                        setSystem(currentSys);
                        setView(currentUser ? 'app' : 'login');
                    }
                }, 1000);

                return () => {
                    window.removeEventListener('storage', sync);
                    clearInterval(watcher);
                };
            }, [currentUser, view]);

            // --- FAXINA AUTOM√ÅTICA ---
            useEffect(() => {
                const rawUsers = JSON.parse(localStorage.getItem('users')) || [];
                const uniqueUsersMap = new Map();
                let hasDuplicates = false;

                rawUsers.forEach(u => {
                    const key = u.username.toLowerCase().trim();
                    if (uniqueUsersMap.has(key)) {
                        hasDuplicates = true;
                        const existing = uniqueUsersMap.get(key);
                        if ((u.isAdmin && !existing.isAdmin) || (u.isVerified && !existing.isVerified)) {
                             uniqueUsersMap.set(key, u);
                        }
                    } else {
                        uniqueUsersMap.set(key, u);
                    }
                });

                if (hasDuplicates) {
                    const cleanUsers = Array.from(uniqueUsersMap.values());
                    setUsers(cleanUsers);
                    localStorage.setItem('users', JSON.stringify(cleanUsers));
                }
            }, []);

            const saveData = (newUsers, newChats, newSystem) => {
                if(newUsers) { setUsers(newUsers); localStorage.setItem('users', JSON.stringify(newUsers)); }
                if(newChats) { setChats(newChats); localStorage.setItem('chats', JSON.stringify(newChats)); }
                if(newSystem) { setSystem(newSystem); localStorage.setItem('system', JSON.stringify(newSystem)); }
            };

            const notify = (msg, type = 'info') => {
                const id = generateId();
                setNotifications(prev => [...prev, { id, msg, type }]);
                setTimeout(() => setNotifications(prev => prev.filter(n => n.id !== id)), 3000);
            };

            const addSecurityLog = (type, targetUser, details) => {
                const newLog = { id: generateId(), type, target: targetUser, details, time: formatFullDate() };
                const currentSystem = JSON.parse(localStorage.getItem('system')) || { securityLogs: [] };
                const updatedLogs = [newLog, ...(currentSystem.securityLogs || [])].slice(0, 50); 
                const updatedSystem = { ...currentSystem, securityLogs: updatedLogs };
                saveData(null, null, updatedSystem);
            };

            const handleRegister = (name, pass, email) => {
                const nameLower = name.toLowerCase().trim();
                if (ADMIN_NAMES_LOWER.includes(nameLower)) return notify("Nome reservado.", "error");
                if (users.find(u => u.username.toLowerCase() === nameLower)) return notify("Nome em uso.", "error");

                const now = formatFullDate();
                const newUser = {
                    id: generateId(), username: name.trim(), password: pass.trim(), email: email || '',
                    avatar: null, partner: null, isAdmin: false, isVerified: false, 
                    plan: 'free', storageUsed: 0, gallery: [], banInfo: null,
                    createdAt: now, lastLogin: now, lastLogout: null, status: 'online'
                };
                saveData([...users, newUser], null, null);
                setCurrentUser(newUser);
                setView('app');
                notify("Conta criada com sucesso!", "success");
            };

            const handleLogin = (name, pass) => {
                const nameLower = name.toLowerCase().trim();
                const passTrim = pass.trim();

                const loginAttempts = JSON.parse(localStorage.getItem('login_attempts')) || {};
                const userAttempts = loginAttempts[nameLower] || { count: 0, lockUntil: null };

                if (userAttempts.lockUntil && userAttempts.lockUntil > Date.now()) {
                    const remainingMinutes = Math.ceil((userAttempts.lockUntil - Date.now()) / 60000);
                    addSecurityLog('hack_attempt', name, `Bloqueado (${remainingMinutes}m)`);
                    return notify(`Bloqueado por ${remainingMinutes} min.`, "error");
                }

                if (ADMIN_CREDENTIALS[nameLower] === passTrim) {
                    const displayName = ADMIN_DISPLAY_NAMES[nameLower];
                    setCurrentUser({ id: `admin_${nameLower}`, username: displayName, isAdmin: true, avatar: null, isVerified: true });
                    setView('admin');
                    notify(`Bem-vindo(a), ${displayName}!`, "success");
                    return;
                }
                
                if (system.maintenance) { setView('maintenance'); return; }

                const user = users.find(u => u.username.toLowerCase().trim() === nameLower);

                if (!user || user.password !== passTrim) {
                    userAttempts.count += 1;
                    if (userAttempts.count >= 5) {
                        userAttempts.lockUntil = Date.now() + 10 * 60 * 1000; 
                        userAttempts.count = 0; 
                        addSecurityLog('security_lock', name, `Bloqueio 10min.`);
                        localStorage.setItem('login_attempts', JSON.stringify({ ...loginAttempts, [nameLower]: userAttempts }));
                        return notify("Bloqueado por 10 min.", "error");
                    }
                    localStorage.setItem('login_attempts', JSON.stringify({ ...loginAttempts, [nameLower]: userAttempts }));
                    addSecurityLog('failed_login', name, `Senha incorreta.`);
                    return notify(`Dados incorretos. (${userAttempts.count}/5)`, "error");
                }

                if (loginAttempts[nameLower]) {
                    delete loginAttempts[nameLower];
                    localStorage.setItem('login_attempts', JSON.stringify(loginAttempts));
                }
                
                if (user.banInfo) {
                    const now = Date.now();
                    if (user.banInfo.type === 'eternal' || user.banInfo.until > now) {
                        setCurrentUser(user);
                        setView('banned'); 
                        return;
                    } else {
                        user.banInfo = null; 
                    }
                }

                const now = formatFullDate();
                const updatedUsers = users.map(u => u.id === user.id ? { ...u, status: 'online', lastLogin: now } : u);
                saveData(updatedUsers, null, null);
                setCurrentUser(updatedUsers.find(u => u.id === user.id));
                setView('app');
            };

            const handleLogout = () => {
                if (currentUser && !currentUser.isAdmin) {
                    const now = formatFullDate();
                    const updatedUsers = users.map(u => u.id === currentUser.id ? { ...u, status: 'offline', lastLogout: now } : u);
                    setUsers(updatedUsers);
                    localStorage.setItem('users', JSON.stringify(updatedUsers));
                }
                setCurrentUser(null);
                setView('login');
            };

            const handleReset = () => {
                if(confirm("Isso apagar√° TODOS os dados do navegador para corrigir erros. Continuar?")) {
                    localStorage.clear();
                    window.location.reload();
                }
            };

            const ToastContainer = () => (
                <div className="fixed top-6 left-0 w-full flex justify-center z-[100] pointer-events-none">
                    <div className="flex flex-col gap-2 w-auto max-w-xs">
                        {notifications.map(n => (
                            <div key={n.id} className={`fade-in-up px-6 py-3 rounded-full shadow-lg font-medium text-sm flex items-center gap-3 ${n.type === 'error' ? 'bg-pink-200 text-pink-900' : 'bg-blue-200 text-blue-900'}`}>
                                <i className={`fas ${n.type === 'error' ? 'fa-exclamation-circle' : 'fa-check-circle'}`}></i>
                                {n.msg}
                            </div>
                        ))}
                    </div>
                </div>
            );

            if (view === 'maintenance') return <MaintenanceScreen system={system} />;
            if (view === 'banned') return <BannedScreen user={currentUser} onLogout={handleLogout} />;
            if (view === 'login') return <LoginScreen onLogin={handleLogin} onRegister={handleRegister} onReset={handleReset} ToastContainer={ToastContainer} />;
            if (view === 'admin') return <AdminPanel currentUser={currentUser} users={users} system={system} onLogout={handleLogout} saveData={saveData} notify={notify} ToastContainer={ToastContainer} />;
            
            // Prote√ß√£o Anti-Crash
            if (!currentUser) { setView('login'); return null; }

            return <UserApp currentUser={currentUser} users={users} chats={chats} system={system} onLogout={handleLogout} saveData={saveData} setCurrentUser={setCurrentUser} notify={notify} ToastContainer={ToastContainer} />;
        }

        // --- COMPONENTE DE NOME COM SELO ---
        const UserName = ({ user }) => {
            if (user.isAdmin) {
                return (
                    <span className="flex items-center gap-1 font-bold text-[#FFD700] drop-shadow-[0_0_5px_rgba(255,215,0,0.5)]">
                        {user.username} <i className="fas fa-crown text-xs" title="Administrador"></i>
                    </span>
                );
            }
            return (
                <span className="flex items-center gap-1 font-bold text-white">
                    {user.username} 
                    {user.isVerified && <i className="fas fa-check-circle text-blue-400 text-xs" title="Verificado"></i>}
                </span>
            );
        };

        // --- TELA DE LOGIN ---
        function LoginScreen({ onLogin, onRegister, onReset, ToastContainer }) {
            const [isLogin, setIsLogin] = useState(true);
            const [form, setForm] = useState({ name: '', pass: '', email: '' });

            return (
                <div className="h-screen flex flex-col items-center justify-center p-6 relative bg-[#121212]">
                    <div className="surface-card p-8 w-full max-w-sm relative z-10 fade-in-up text-center">
                        <div className="mb-8">
                            <div className="w-16 h-16 gradient-btn rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-blue-500/30">
                                <i className="fas fa-infinity text-2xl"></i>
                            </div>
                            <h1 className="text-3xl font-bold google-font gradient-text mb-1">Os Mais Mais</h1>
                            <p className="text-gray-400 text-sm mb-4">Conecte-se com estilo</p>
                            <div className="flex justify-center"><SupportBadge plan="free" /></div>
                        </div>
                        <div className="space-y-4">
                            <input type="text" value={form.name} onChange={e => setForm({...form, name: e.target.value})} className="google-input w-full px-6 py-4 text-white placeholder-gray-500 outline-none" placeholder="Nome de usu√°rio" />
                            {!isLogin && <input type="email" value={form.email} onChange={e => setForm({...form, email: e.target.value})} className="google-input w-full px-6 py-4 text-white placeholder-gray-500 outline-none" placeholder="Email" />}
                            <input type="password" value={form.pass} onChange={e => setForm({...form, pass: e.target.value})} className="google-input w-full px-6 py-4 text-white placeholder-gray-500 outline-none" placeholder="Senha" />
                            <button onClick={() => isLogin ? onLogin(form.name, form.pass) : onRegister(form.name, form.pass, form.email)} className="w-full py-4 rounded-full gradient-btn font-bold text-lg hover:opacity-90 transition-opacity mt-2 shadow-lg">{isLogin ? 'Entrar' : 'Cadastrar'}</button>
                        </div>
                        <div className="mt-8 flex flex-col gap-4">
                            <button onClick={() => setIsLogin(!isLogin)} className="text-sm text-blue-400 hover:text-white font-medium">{isLogin ? 'Criar uma conta' : 'J√° tenho uma conta'}</button>
                            <button onClick={onReset} className="text-xs text-gray-600 hover:text-red-400">Reiniciar Sistema (Limpa erros)</button>
                        </div>
                    </div>
                    <ToastContainer />
                </div>
            );
        }

        // --- APP DO USU√ÅRIO ---
        function UserApp({ currentUser, users, chats, system, onLogout, saveData, setCurrentUser, notify, ToastContainer }) {
            const [tab, setTab] = useState('news'); // INICIA EM NOT√çCIAS
            const [msg, setMsg] = useState('');
            const chatEndRef = useRef(null);
            const [supportStatus, setSupportStatus] = useState({ isOpen: false, text: '', showWarning: false });
            const [studioModal, setStudioModal] = useState({ open: false, studioName: '', reason: '' });

            const today = new Date();
            const studioReopenDate = new Date('2026-02-02T06:00:00'); 
            const isStudio34Open = today >= studioReopenDate;

            useEffect(() => {
                const checkSupport = () => {
                    const now = new Date();
                    const day = now.getDay();
                    const h = now.getHours();
                    const isWeekend = day === 0 || day === 6;
                    const isBusinessHours = !isWeekend && h >= 6 && h < 18;
                    const isPaidUser = currentUser.plan === 'vip' || currentUser.plan === 'king';
                    if (isBusinessHours) setSupportStatus({ isOpen: true, text: 'Aberto (06h - 18h)', showWarning: false });
                    else {
                        if (isPaidUser) setSupportStatus({ isOpen: true, text: 'Fila de Espera VIP', showWarning: true });
                        else setSupportStatus({ isOpen: false, text: isWeekend ? 'Fechado (Descanso)' : 'Fechado (Volta 06h)', showWarning: false });
                    }
                };
                checkSupport();
                const i = setInterval(checkSupport, 60000);
                return () => clearInterval(i);
            }, [currentUser.plan]);

            const partner = users.find(u => u.id === currentUser.partner);
            const chatId = partner ? [currentUser.id, partner.id].sort().join('_') : null;
            const messages = (chatId && chats[chatId]) ? chats[chatId] : [];

            useEffect(() => { if(chatEndRef.current && tab === 'chat') chatEndRef.current.scrollIntoView({ behavior: 'smooth' }); }, [messages, tab]);

            const handleSend = (e) => {
                e.preventDefault();
                if (!msg.trim() || !partner) return;
                const newMsg = { id: generateId(), senderId: currentUser.id, text: msg, time: formatTime() };
                const newChats = { ...chats, [chatId]: [...messages, newMsg] };
                saveData(null, newChats, null);
                setMsg('');
            };

            const handleAdd = (targetName) => {
                const targetLower = targetName.toLowerCase();
                if (ADMIN_NAMES_LOWER.includes(targetLower)) return notify("Usu√°rio oculto.", "error");
                const target = users.find(u => u.username.toLowerCase() === targetLower);
                if (!target) return notify("Usu√°rio n√£o encontrado.", "error");
                if (target.id === currentUser.id) return notify("Erro de sistema.", "error");
                const updatedUsers = users.map(u => {
                    if (u.id === currentUser.id) return { ...u, partner: target.id };
                    if (u.id === target.id) return { ...u, partner: currentUser.id };
                    return u;
                });
                saveData(updatedUsers, null, null);
                setCurrentUser(updatedUsers.find(u => u.id === currentUser.id));
                notify("Conex√£o estabelecida!", "success");
                setTab('chat');
            };

            const handleProfileUpdate = (field, value) => {
                const updated = { ...currentUser, [field]: value };
                const list = users.map(u => u.id === currentUser.id ? updated : u);
                saveData(list, null, null);
                setCurrentUser(updated);
                notify("Perfil atualizado.", "success");
            };

            const handleUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const currentPlan = PLANS[currentUser.plan];
                if (currentUser.storageUsed + file.size > currentPlan.limit) return notify(`Limite atingido!`, "error");
                if (file.size > 50000000) return notify("M√°ximo 50MB (Demo)", "error");
                const reader = new FileReader();
                reader.onloadend = () => {
                    const newFile = { id: generateId(), name: file.name, data: reader.result, type: file.type };
                    const updatedUser = { ...currentUser, storageUsed: currentUser.storageUsed + file.size, gallery: [...(currentUser.gallery || []), newFile] };
                    const list = users.map(u => u.id === currentUser.id ? updatedUser : u);
                    saveData(list, null, null);
                    setCurrentUser(updatedUser);
                    notify("Upload conclu√≠do!", "success");
                };
                reader.readAsDataURL(file);
            };

            const upgradePlan = (planKey) => {
                const plan = PLANS[planKey];
                let confirmMsg = `Assinar ${plan.name} por R$${plan.price},00?`;
                if (planKey === 'vip') confirmMsg = `Assinar VIP? O primeiro m√™s √© GR√ÅTIS! Depois R$ 50,00/m√™s.`;
                if(confirm(confirmMsg)) {
                    const updated = { ...currentUser, plan: planKey };
                    const list = users.map(u => u.id === currentUser.id ? updated : u);
                    saveData(list, null, null);
                    setCurrentUser(updated);
                    notify(`Plano atualizado para ${plan.name}!`, "success");
                }
            };

            const submitStudioRequest = () => {
                const reason = studioModal.reason.toLowerCase();
                const forbiddenWords = ['ver', 'conhecer', 'visitar', 'passear', 'curiosidade', 'olhar', 's√≥'];
                const allowedWords = ['trabalhar', 'ajudar', 'servi√ßo', 'documento', 'entrega', 'reuni√£o', 'job'];
                const hasForbidden = forbiddenWords.some(word => reason.includes(word));
                const hasAllowed = allowedWords.some(word => reason.includes(word));
                if (hasForbidden || !hasAllowed || reason.length < 5) {
                    notify("ACESSO NEGADO. Motivo inv√°lido.", "error");
                    return;
                }
                const currentStudioName = studioModal.studioName;
                const currentReason = studioModal.reason;
                setStudioModal({ open: false, studioName: '', reason: '' });
                notify("Solicita√ß√£o enviada para os administradores!", "success");
                setTimeout(() => {
                    const subject = `Solicita√ß√£o de Acesso ao ${currentStudioName}`;
                    const body = `Ol√° Administradores,\n\nMotivo do acesso: ${currentReason}\n\nAss: ${currentUser.username}`;
                    const mailtoLink = `mailto:admin@osmaismais.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    const link = document.createElement('a');
                    link.href = mailtoLink;
                    link.target = "_blank"; link.rel = "noopener noreferrer"; link.style.display = 'none';
                    document.body.appendChild(link); link.click(); document.body.removeChild(link);
                }, 1500);
            };

            const sendSupportMsg = (txt) => {
                if(!txt.trim()) return;
                const newSys = { ...system, supportMsgs: [...system.supportMsgs, { id: generateId(), user: currentUser.username, text: txt, time: formatFullDate() }] };
                saveData(null, null, newSys);
                notify("Mensagem enviada.", "success");
            };

            return (
                <div className="h-screen flex flex-col bg-[#121212] text-[#e3e3e3] relative">
                    
                    {/* MODAL DE PORTARIA */}
                    {studioModal.open && (
                        <div className="absolute inset-0 z-[100] bg-black/95 flex items-center justify-center p-6 backdrop-blur-sm fade-in-up">
                            <div className="surface-card p-6 w-full max-w-sm border border-red-500/30 shadow-[0_0_50px_rgba(220,38,38,0.2)]">
                                <div className="text-center mb-6">
                                    <div className="w-16 h-16 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500"><i className="fas fa-user-shield text-2xl text-red-500"></i></div>
                                    <h3 className="text-xl font-bold text-white mb-1">Controle de Acesso</h3>
                                    <p className="text-xs text-gray-400">Voc√™ est√° tentando entrar em uma √°rea restrita.</p>
                                </div>
                                <label className="text-xs font-bold text-gray-500 uppercase mb-2 block">Motivo da visita</label>
                                <textarea className="w-full bg-black/50 border border-gray-700 rounded-xl p-4 text-sm text-white outline-none focus:border-red-500 transition-colors h-32 resize-none mb-4" placeholder="Ex: Entregar documentos, realizar servi√ßo..." value={studioModal.reason} onChange={(e) => setStudioModal({...studioModal, reason: e.target.value})}></textarea>
                                <div className="flex gap-3">
                                    <button onClick={() => setStudioModal({ open: false, studioName: '', reason: '' })} className="flex-1 py-3 rounded-xl bg-gray-800 text-gray-400 font-bold text-xs hover:bg-gray-700">CANCELAR</button>
                                    <button onClick={submitStudioRequest} className="flex-1 py-3 rounded-xl bg-red-600 text-white font-bold text-xs hover:bg-red-500 shadow-lg">SOLICITAR</button>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="px-6 py-4 flex justify-between items-center z-20 bg-[#121212] sticky top-0 border-b border-[#2d2d2d]">
                        <h2 className="google-font font-medium text-xl gradient-text">Os mais mais</h2>
                        <div className="flex items-center gap-3">
                            <span className={`text-xs font-bold px-3 py-1 rounded-full bg-[#2d2d2d] ${PLANS[currentUser.plan].color}`}>{currentUser.plan.toUpperCase()}</span>
                            <div className="w-10 h-10 rounded-full overflow-hidden border-2 border-[#2d2d2d] p-[2px]">
                                <img src={currentUser.avatar || `https://api.dicebear.com/7.x/initials/svg?seed=${currentUser.username}`} className="w-full h-full rounded-full object-cover" />
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto pb-32 p-4">
                        
                        {/* NEWS TAB (RESTAURADA) */}
                        {tab === 'news' && (
                            <div className="space-y-6">
                                <div className="flex justify-between items-center">
                                    <h2 className="text-2xl font-bold google-font gradient-text">√öltimas Not√≠cias</h2>
                                    <span className="text-xs text-gray-500">{system.news ? system.news.length : 0} publica√ß√µes</span>
                                </div>
                                {system.news && system.news.length > 0 ? (
                                    system.news.map(item => (
                                        <div key={item.id} className="surface-card p-5 border-l-4 border-blue-500 fade-in-up">
                                            <h3 className="text-lg font-bold text-white mb-2">{item.title}</h3>
                                            <p className="text-sm text-gray-300 leading-relaxed whitespace-pre-wrap mb-4">{item.body}</p>
                                            <div className="flex justify-between items-center text-[10px] text-gray-500 border-t border-white/5 pt-3">
                                                <span><i className="fas fa-calendar-alt mr-1"></i> {item.date}</span>
                                                <span className="text-blue-300 font-bold"><i className="fas fa-feather-alt mr-1"></i> {item.author}</span>
                                            </div>
                                        </div>
                                    ))
                                ) : (
                                    <div className="text-center text-gray-500 py-10 opacity-50">
                                        <i className="fas fa-newspaper text-4xl mb-3"></i>
                                        <p>Nenhuma not√≠cia publicada ainda.</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* CHAT */}
                        {tab === 'chat' && (
                            <div className="h-full flex flex-col">
                                {!partner ? (
                                    <div className="flex-1 flex flex-col items-center justify-center text-center opacity-60">
                                        <div className="w-24 h-24 bg-[#2d2d2d] rounded-full flex items-center justify-center mb-4"><i className="fas fa-comment-slash text-3xl text-blue-400"></i></div>
                                        <h3 className="text-lg google-font mb-2">Nenhuma conversa</h3>
                                        <button onClick={() => setTab('add')} className="text-pink-400 font-medium hover:text-pink-300">Adicionar algu√©m</button>
                                    </div>
                                ) : (
                                    <>
                                        <div className="text-center mb-4"><span className="text-xs bg-[#2d2d2d] px-4 py-2 rounded-full text-blue-300">Conversando com <UserName user={partner} /></span></div>
                                        <div className="flex-1 space-y-3">
                                            {messages.map((m, i) => (
                                                <div key={i} className={`flex ${m.senderId === currentUser.id ? 'justify-end' : 'justify-start'} scale-pop`}>
                                                    <div className={`max-w-[75%] px-5 py-3 rounded-3xl text-sm ${m.senderId === currentUser.id ? 'gradient-btn' : 'bg-[#2d2d2d] text-gray-200'}`}>{m.text}</div>
                                                </div>
                                            ))}
                                            <div ref={chatEndRef}></div>
                                        </div>
                                    </>
                                )}
                            </div>
                        )}

                        {tab === 'add' && (
                            <div className="surface-card p-6 mt-4">
                                <h2 className="text-xl google-font mb-6 text-blue-400">Nova Conex√£o</h2>
                                <div className="relative">
                                    <input id="search" className="google-input w-full px-6 py-4 pl-12 text-white placeholder-gray-500 outline-none" placeholder="Buscar usu√°rio..." />
                                    <i className="fas fa-search absolute left-5 top-5 text-gray-500"></i>
                                    <button onClick={() => handleAdd(document.getElementById('search').value)} className="absolute right-2 top-2 bg-pink-500 text-white w-10 h-10 rounded-full flex items-center justify-center hover:scale-105 transition-transform shadow-lg"><i className="fas fa-plus"></i></button>
                                </div>
                            </div>
                        )}

                        {tab === 'profile' && (
                            <div className="space-y-4">
                                <div className="surface-card p-6 flex flex-col items-center">
                                    <div className="relative mb-4">
                                        <div className="w-28 h-28 rounded-full overflow-hidden border-4 border-[#2d2d2d]"><img src={currentUser.avatar || `https://api.dicebear.com/7.x/initials/svg?seed=${currentUser.username}`} className="w-full h-full object-cover" /></div>
                                        <label className="absolute bottom-0 right-0 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center cursor-pointer text-white hover:scale-110 transition-transform shadow-lg"><i className="fas fa-camera"></i><input type="file" accept="image/*" className="hidden" onChange={(e) => { const file = e.target.files[0]; if(file) { const r = new FileReader(); r.onload = () => handleProfileUpdate('avatar', r.result); r.readAsDataURL(file); } }} /></label>
                                    </div>
                                    
                                    <div className="w-full space-y-3">
                                        <div className="flex justify-center items-center gap-2 mb-2">
                                            {currentUser.isVerified && <div className="text-center text-xs text-blue-400 font-bold bg-blue-900/30 px-2 py-1 rounded"><i className="fas fa-check-circle"></i> VERIFICADO</div>}
                                            {currentUser.isAdmin && <div className="text-center text-xs text-yellow-400 font-bold bg-yellow-900/30 px-2 py-1 rounded"><i className="fas fa-crown"></i> ADMINISTRADOR</div>}
                                        </div>

                                        <input value={currentUser.username} onChange={(e) => handleProfileUpdate('username', e.target.value)} className="w-full bg-transparent border-b border-[#3d3d3d] p-2 text-center text-xl font-bold outline-none focus:border-blue-500 transition-colors" placeholder="Nome" />
                                        <input value={currentUser.email} onChange={(e) => handleProfileUpdate('email', e.target.value)} className="w-full bg-transparent border-b border-[#3d3d3d] p-2 text-center text-sm text-gray-400 outline-none focus:border-blue-500 transition-colors" placeholder="Email" />
                                        <input value={currentUser.password} onChange={(e) => handleProfileUpdate('password', e.target.value)} className="w-full bg-transparent border-b border-[#3d3d3d] p-2 text-center text-sm text-gray-400 outline-none focus:border-blue-500 transition-colors" placeholder="Senha" type="text" />
                                    </div>
                                </div>
                                <div className="surface-card p-6">
                                    <div className="flex justify-between items-center mb-4"><h3 className="google-font font-medium text-pink-400">Arquivos</h3><label className="bg-[#2d2d2d] hover:bg-[#3d3d3d] px-4 py-2 rounded-full text-xs font-bold cursor-pointer transition-colors flex items-center gap-2"><i className="fas fa-cloud-upload-alt text-blue-400"></i> Upload<input type="file" className="hidden" onChange={handleUpload} /></label></div>
                                    <div className="mb-4"><div className="flex justify-between text-xs text-gray-400 mb-2"><span>{(currentUser.storageUsed / 1024 / 1024).toFixed(1)} MB usados</span><span>{PLANS[currentUser.plan].label}</span></div><div className="h-2 bg-[#2d2d2d] rounded-full overflow-hidden"><div className="h-full bg-gradient-to-r from-blue-500 to-pink-500" style={{ width: `${Math.min((currentUser.storageUsed / PLANS[currentUser.plan].limit) * 100, 100)}%` }}></div></div></div>
                                    <div className="grid grid-cols-3 gap-2">{(currentUser.gallery || []).map((f, i) => (<div key={i} className="aspect-square bg-[#2d2d2d] rounded-2xl overflow-hidden cursor-pointer hover:opacity-80 transition-opacity relative">{f.type.startsWith('image/') ? (<img src={f.data} className="w-full h-full object-cover" onClick={() => { const w = window.open(""); w.document.write(`<img src="${f.data}" style="width:100%"/>`); }}/>) : (<div className="w-full h-full flex flex-col items-center justify-center text-gray-500"><i className="fas fa-file text-2xl mb-1"></i><span className="text-[9px] truncate w-full text-center px-1">{f.name}</span></div>)}</div>))}{(currentUser.gallery || []).length === 0 && <div className="col-span-3 text-center text-xs text-gray-600 py-4">Galeria vazia</div>}</div>
                                </div>
                                <div className="surface-card p-6"><h3 className="google-font font-medium mb-4 text-blue-400">Planos</h3><div className="grid grid-cols-2 gap-3"><button onClick={() => upgradePlan('vip')} className="bg-[#2d2d2d] p-4 rounded-2xl text-left hover:bg-[#353535] border border-transparent hover:border-blue-500 transition-all"><div className="text-blue-400 font-bold">VIP</div><div className="text-xs text-gray-400 mt-1">5 GB</div><div className="text-lg font-bold mt-2 text-green-400">R$ 0,00 <span className="text-[8px] text-gray-500 block">1¬∫ m√™s gr√°tis</span></div></button><button onClick={() => upgradePlan('king')} className="bg-[#2d2d2d] p-4 rounded-2xl text-left hover:bg-[#353535] border border-transparent hover:border-pink-500 transition-all"><div className="text-pink-400 font-bold">KING</div><div className="text-xs text-gray-400 mt-1">40 GB</div><div className="text-lg font-bold mt-2">R$ 100</div></button></div></div>
                                <button onClick={onLogout} className="w-full py-4 rounded-full bg-[#2d2d2d] text-pink-400 font-bold hover:bg-[#3d3d3d] mb-6 shadow-lg">Sair</button>
                            </div>
                        )}

                        {tab === 'menu' && (
                            <div className="surface-card p-6 pb-20">
                                <div className="flex justify-between items-center mb-6"><h3 className="google-font font-bold text-lg">Suporte</h3><span className={`text-[10px] px-3 py-1 rounded-full font-bold border ${supportStatus.isOpen ? 'bg-green-900/30 border-green-500 text-green-400' : 'bg-red-900/30 border-red-500 text-red-400'}`}>{supportStatus.text.toUpperCase()}</span></div>
                                {supportStatus.showWarning && (<div className="bg-orange-900/20 border border-orange-500/50 p-4 rounded-xl mb-4 flex items-start gap-3"><i className="fas fa-clock text-orange-400 mt-1"></i><div><h4 className="text-sm font-bold text-orange-400">Atendimento Offline</h4><p className="text-xs text-gray-300 mt-1 leading-relaxed">Mesmo com o plano VIP, nossa equipe n√£o trabalha ap√≥s as 18:00 ou fins de semana. Sua mensagem ser√° a primeira a ser respondida no pr√≥ximo dia √∫til √†s 06:00.</p></div></div>)}
                                {supportStatus.isOpen ? (<div className="space-y-4"><div className="bg-[#2d2d2d] p-4 rounded-2xl"><p className="text-sm text-gray-300 mb-2">Como podemos ajudar?</p><div className="flex gap-2"><input id="supportInput" className="google-input flex-1 px-4 py-3 text-sm text-white outline-none placeholder-gray-500" placeholder="Digite sua mensagem..." /><button onClick={() => { const inp = document.getElementById('supportInput'); sendSupportMsg(inp.value); inp.value = ''; }} className="w-12 h-12 rounded-full gradient-btn flex items-center justify-center"><i className="fas fa-paper-plane"></i></button></div></div></div>) : (<div className="bg-[#2d2d2d] p-6 rounded-2xl text-center"><i className="fas fa-moon text-4xl text-blue-400 mb-4"></i><h4 className="font-bold text-lg mb-2">Suporte Fechado üîí</h4><p className="text-gray-400 text-sm mb-6">Estamos descansando.<br/>Volta no pr√≥ximo dia √∫til √†s 06:00.</p><button onClick={() => setTab('profile')} className="w-full py-3 rounded-full border border-pink-500 text-pink-400 font-bold hover:bg-pink-900/20">Virar VIP (Fila de Espera)</button></div>)}
                                <div className="mt-8 pt-6 border-t border-[#2d2d2d]">
                                    <h4 className="font-bold text-gray-400 mb-4 flex items-center gap-2"><i className="fas fa-map-marker-alt text-pink-500"></i> Nossas Sedes</h4>
                                    <div className="space-y-3 mb-6">
                                        <div className="studio-highlight p-4 rounded-2xl relative overflow-hidden group"><div className="absolute top-0 right-0 bg-red-600 text-white text-[9px] font-bold px-2 py-1 rounded-bl-xl"><i className="fas fa-lock"></i> RESTRITO</div><h5 className="text-sm font-bold text-white mb-1 flex items-center gap-2">Est√∫dio 34 <i className="fas fa-star text-yellow-400 text-xs"></i></h5><p className="text-xs text-gray-300">R. Jos√© Gon√ßalves Paim, 60<br/>Parque Bitaru, S√£o Vicente - SP</p><div className="flex flex-col gap-1 mt-2 border-t border-pink-500/20 pt-2"><span className="text-[10px] text-white font-bold flex items-center gap-1"><i className="fas fa-clock text-yellow-400"></i> Hor√°rio: 06:00 √†s 12:20</span><span className="text-[10px] text-red-400 font-bold uppercase"><i className="fas fa-hand-paper mr-1"></i> Acesso Proibido</span><span className="text-[10px] text-blue-300 flex items-center gap-1"><i className="fas fa-code"></i> Sede da Nossa Parceria</span><span className="text-[9px] text-gray-500 italic">Entrada liberada apenas para Especialistas (Devs).</span></div><div className="absolute inset-0 bg-black/90 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 p-4 text-center backdrop-blur-sm"><i className="fas fa-lock text-3xl text-red-500 mb-2"></i><p className="text-xs text-white font-bold">√Årea Restrita</p><p className="text-[10px] text-gray-300 mt-1 mb-2">Acesso f√≠sico proibido.</p><button onClick={() => setStudioModal({ open: true, studioName: 'Est√∫dio 34', reason: '' })} className="bg-red-600 border border-red-400 text-white px-3 py-1.5 rounded-full text-[10px] font-bold hover:bg-red-700">Pedir Autoriza√ß√£o (E-mail)</button></div></div>
                                        <div className="bg-[#1a1a1a] p-3 rounded-xl border border-[#2d2d2d] relative overflow-hidden group"><div className="absolute top-2 right-2 text-red-500 text-[10px]"><i className="fas fa-lock"></i></div><h5 className="text-sm font-bold text-white mb-1">Est√∫dio 54</h5><p className="text-xs text-gray-400">Rua Jos√© Benedito Henriques</p><p className="text-[10px] text-red-400 mt-1 flex items-center gap-1 font-bold"><i className="fas fa-user-shield"></i> Apenas Especialistas</p><div className="absolute inset-0 bg-black/90 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 p-4 text-center backdrop-blur-sm"><p className="text-xs text-white font-bold mb-2">√Årea Restrita</p><button onClick={() => setStudioModal({ open: true, studioName: 'Est√∫dio 54', reason: '' })} className="bg-red-600/20 border border-red-500 text-red-400 px-3 py-1 rounded-full text-[10px]">Pedir Autoriza√ß√£o</button></div></div>
                                        <div className="bg-[#1a1a1a] p-3 rounded-xl border border-[#2d2d2d] relative overflow-hidden group"><div className="absolute top-2 right-2 text-red-500 text-[10px]"><i className="fas fa-lock"></i></div><h5 className="text-sm font-bold text-white mb-1">Est√∫dio 76</h5><p className="text-xs text-gray-400">Rua Quinze de Novembro, 661</p><p className="text-[10px] text-red-400 mt-1 flex items-center gap-1 font-bold"><i className="fas fa-user-shield"></i> Apenas Especialistas</p><div className="absolute inset-0 bg-black/90 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 p-4 text-center backdrop-blur-sm"><p className="text-xs text-white font-bold mb-2">√Årea Restrita</p><button onClick={() => setStudioModal({ open: true, studioName: 'Est√∫dio 76', reason: '' })} className="bg-red-600/20 border border-red-500 text-red-400 px-3 py-1 rounded-full text-[10px]">Pedir Autoriza√ß√£o</button></div></div>
                                    </div>
                                    <div className="bg-[#1a1a1a] p-4 rounded-xl border border-[#2d2d2d] mt-4 mb-4"><h4 className="font-bold text-gray-400 mb-2 flex items-center gap-2"><i className="fas fa-users-slash text-red-400"></i> Equipe Exclusiva</h4><p className="text-xs text-gray-500 leading-relaxed"><strong>Aten√ß√£o:</strong> Nossa equipe √© composta unicamente pelos fundadores. N√£o estamos contratando e n√£o abrimos vagas.</p><p className="text-[10px] text-blue-400 mt-2 font-mono border-t border-white/5 pt-2">Fim da Gest√£o Atual: 12/12/2026<br/><span className="text-gray-400">Ap√≥s esta data, ser√° cobrada taxa de manuten√ß√£o de <strong>R$ 20,00</strong>.</span></p></div>
                                    <div className="bg-[#1a1a1a] p-4 rounded-xl border border-[#2d2d2d] mt-4 mb-4"><h4 className="font-bold text-gray-400 mb-2 flex items-center gap-2"><i className="fas fa-scroll text-purple-400"></i> Manifesto</h4><p className="text-xs text-gray-400 italic mb-2">"Nem todas as pessoas ficam para sempre."</p><p className="text-xs text-gray-500 leading-relaxed">Esta √© a pedra angular da nossa administra√ß√£o. O Lucas e a B√°rbara n√£o s√£o donos do tempo, s√£o arquitetos do presente. Nossa gest√£o tem um fim: <strong>10 de Dezembro de 2027</strong>.<br/><br/>N√≥s n√£o vamos abandonar o barco; vamos pass√°-lo para novas m√£os. N√≥s vamos para outros projetos. O "Os Mais Mais" fica.</p></div>
                                    <h4 className="font-bold text-gray-400 mb-2 flex items-center gap-2"><i className="fas fa-file-contract"></i> Termos de Uso</h4>
                                    <div className="text-xs text-gray-500 h-24 overflow-y-auto bg-[#1a1a1a] p-3 rounded-xl leading-relaxed">1. Respeito M√∫tuo: Trate todos com dignidade.<br/>2. Seguran√ßa: N√£o compartilhe dados sens√≠veis.<br/>3. Conte√∫do: Proibido material il√≠cito.<br/>4. Penalidades: Infra√ß√µes resultam em banimento.<br/>5. Suporte: Gr√°tis (Seg-Sex 06h-18h). Fim de semana: Fechado.<br/>6. Dados: Suas mensagens s√£o criptografadas.</div>
                                </div>
                            </div>
                        )}
                    </div>

                    {tab === 'chat' && partner && (
                        <div className="fixed bottom-24 left-4 right-4 z-40">
                            <form onSubmit={handleSend} className="bg-[#1E1E1E] p-2 rounded-full flex gap-2 shadow-lg border border-[#2d2d2d]">
                                <input value={msg} onChange={e => setMsg(e.target.value)} className="flex-1 bg-transparent px-4 outline-none text-white placeholder-gray-500" placeholder="Mensagem..." />
                                <button className="w-10 h-10 rounded-full gradient-btn flex items-center justify-center hover:scale-105 transition-transform"><i className="fas fa-paper-plane text-xs"></i></button>
                            </form>
                        </div>
                    )}

                    <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-[#2C2C2C] px-6 py-3 rounded-full flex items-center gap-8 shadow-2xl z-50 border border-[#3d3d3d]">
                        <button onClick={() => setTab('news')} className={`text-2xl transition-all ${tab === 'news' ? 'text-blue-400 scale-125' : 'text-gray-500 hover:text-gray-300'}`}><i className="fas fa-newspaper"></i></button>
                        <button onClick={() => setTab('chat')} className={`text-2xl transition-all ${tab === 'chat' ? 'text-blue-400 scale-125' : 'text-gray-500 hover:text-gray-300'}`}><i className="fas fa-comment"></i></button>
                        <button onClick={() => setTab('add')} className={`text-2xl transition-all ${tab === 'add' ? 'text-pink-400 scale-125' : 'text-gray-500 hover:text-gray-300'}`}><i className="fas fa-plus-circle"></i></button>
                        <button onClick={() => setTab('profile')} className={`text-2xl transition-all ${tab === 'profile' ? 'text-blue-400 scale-125' : 'text-gray-500 hover:text-gray-300'}`}><i className="fas fa-user-circle"></i></button>
                        <button onClick={() => setTab('menu')} className={`text-2xl transition-all ${tab === 'menu' ? 'text-pink-400 scale-125' : 'text-gray-500 hover:text-gray-300'}`}><i className="fas fa-bars"></i></button>
                    </div>
                    
                    <ToastContainer />
                </div>
            );
        }

        // --- PAINEL ADMIN ---
        function AdminPanel({ currentUser, users, system, onLogout, saveData, notify, ToastContainer }) {
            const [page, setPage] = useState('news');
            const [newsTitle, setNewsTitle] = useState('');
            const [newsBody, setNewsBody] = useState('');

            const toggleBan = (id, type) => {
                let until = 0;
                if(type === '24h') until = Date.now() + 86400000;
                if(type === '7d') until = Date.now() + (86400000 * 7);
                if(type === 'eternal') until = 9999999999999;
                const updated = users.map(u => u.id === id ? { ...u, banInfo: type ? { type, until } : null } : u);
                saveData(updated, null, null);
                notify("Status alterado.", "success");
            };

            const toggleVerify = (id) => {
                const updated = users.map(u => u.id === id ? { ...u, isVerified: !u.isVerified } : u);
                saveData(updated, null, null);
                notify("Selo atualizado.", "success");
            };

            const toggleMaintenance = (type) => {
                const newSys = { ...system, maintenance: !system.maintenance, maintenanceType: type || 'emergency' };
                saveData(null, null, newSys);
                notify(newSys.maintenance ? "Bloqueio ATIVADO." : "Bloqueio DESATIVADO.", "info");
            };

            const postNews = () => {
                if (!newsTitle || !newsBody) return notify("Preencha t√≠tulo e texto.", "error");
                const newArticle = { id: generateId(), title: newsTitle, body: newsBody, date: formatFullDate(), author: currentUser.username };
                const newSys = { ...system, news: [newArticle, ...(system.news || [])] };
                saveData(null, null, newSys);
                setNewsTitle('');
                setNewsBody('');
                notify("Not√≠cia publicada!", "success");
            };

            const deleteNews = (id) => {
                const newSys = { ...system, news: system.news.filter(n => n.id !== id) };
                saveData(null, null, newSys);
                notify("Not√≠cia apagada.", "success");
            };

            return (
                <div className="h-screen flex flex-col bg-[#121212] text-white">
                    <div className="p-6 border-b border-[#2d2d2d] flex justify-between items-center bg-[#1E1E1E]"><h1 className="google-font font-bold text-lg text-blue-400">Painel Admin</h1><button onClick={onLogout} className="text-xs font-bold text-white gradient-btn px-4 py-2 rounded-full hover:opacity-90">SAIR</button></div>
                    <div className="flex p-4 gap-2 overflow-x-auto"><button onClick={() => setPage('users')} className={`flex-1 py-3 px-2 rounded-full text-xs font-bold ${page === 'users' ? 'gradient-btn' : 'bg-[#2d2d2d] text-gray-400'}`}>Usu√°rios</button><button onClick={() => setPage('news')} className={`flex-1 py-3 px-2 rounded-full text-xs font-bold ${page === 'news' ? 'gradient-btn' : 'bg-[#2d2d2d] text-gray-400'}`}>Not√≠cias</button><button onClick={() => setPage('monitor')} className={`flex-1 py-3 px-2 rounded-full text-xs font-bold ${page === 'monitor' ? 'gradient-btn' : 'bg-[#2d2d2d] text-gray-400'}`}>Monitor</button><button onClick={() => setPage('sys')} className={`flex-1 py-3 px-2 rounded-full text-xs font-bold ${page === 'sys' ? 'gradient-btn' : 'bg-[#2d2d2d] text-gray-400'}`}>Sistema</button></div>
                    <div className="flex-1 overflow-y-auto p-4 space-y-3">
                        {page === 'news' && (<div className="space-y-6"><div className="surface-card p-6"><h3 className="font-bold text-lg mb-4 text-blue-400">Publicar Not√≠cia</h3><input className="google-input w-full px-4 py-3 mb-3 text-sm text-white placeholder-gray-500 outline-none" placeholder="T√≠tulo da Manchete" value={newsTitle} onChange={e => setNewsTitle(e.target.value)} /><textarea className="w-full bg-[#2d2d2d] rounded-xl p-4 text-sm text-white outline-none mb-3 h-32 resize-none" placeholder="Conte√∫do da not√≠cia..." value={newsBody} onChange={e => setNewsBody(e.target.value)}></textarea><button onClick={postNews} className="w-full py-3 rounded-full gradient-btn font-bold text-sm shadow-lg">PUBLICAR AGORA</button></div><div className="space-y-3"><h4 className="text-xs font-bold text-gray-500 uppercase ml-1">Not√≠cias Ativas</h4>{system.news && system.news.map(item => (<div key={item.id} className="surface-card p-4 border-l-4 border-blue-500 relative"><button onClick={() => deleteNews(item.id)} className="absolute top-2 right-2 text-red-500 hover:text-red-300"><i className="fas fa-trash"></i></button><div className="font-bold text-white pr-6">{item.title}</div><div className="text-[10px] text-gray-500 mb-2">{item.date} por {item.author}</div><div className="text-xs text-gray-400 line-clamp-2">{item.body}</div></div>))}</div></div>)}
                        {page === 'users' && users.filter(u => !u.isAdmin).map(u => {
                            const isBanned = !!u.banInfo;
                            const banType = u.banInfo?.type;
                            return (<div key={u.id} className="surface-card p-6"><div className="flex justify-between items-start mb-3"><div><div className="font-bold text-lg text-white flex items-center gap-1">{u.username} {u.isVerified && <i className="fas fa-check-circle text-blue-400 text-xs" title="Verificado"></i>}</div><div className="text-xs text-gray-400">Email: {u.email || 'Sem email'}</div><div className="text-xs text-gray-400">Senha: {u.password}</div></div><div className="flex flex-col items-end"><span className={`text-[10px] font-bold px-2 py-1 rounded-full mb-1 ${u.status === 'online' ? 'bg-green-900 text-green-300' : 'bg-gray-700 text-gray-400'}`}>{u.status.toUpperCase()}</span><button onClick={() => toggleVerify(u.id)} className={`text-[10px] px-2 py-1 rounded border ${u.isVerified ? 'border-red-500 text-red-400' : 'border-blue-500 text-blue-400'}`}>{u.isVerified ? 'TIRAR SELO ‚ùå' : 'DAR SELO ‚úÖ'}</button></div></div><div className="bg-[#121212] p-3 rounded-xl mb-4 border border-[#2d2d2d] text-[10px] text-gray-400 font-mono space-y-1"><div className="flex justify-between"><span>üìÖ Criado em:</span><span className="text-blue-300">{u.createdAt}</span></div><div className="flex justify-between"><span>üëÄ Visto por √∫ltimo:</span><span className="text-pink-300">{u.lastLogin || '-'}</span></div></div><div className="flex gap-2"><button onClick={() => toggleBan(u.id, null)} className={`flex-1 py-2 rounded-full text-xs font-bold ${!isBanned ? 'bg-green-600 text-white shadow-lg' : 'bg-[#2d2d2d] text-green-400 border border-green-500/30'}`}>{isBanned ? 'DESBANIR' : 'LIVRE'}</button><button onClick={() => toggleBan(u.id, '24h')} className={`flex-1 py-2 rounded-full text-xs font-bold ${banType === '24h' ? 'bg-yellow-600 text-white shadow-lg' : 'bg-[#2d2d2d] text-yellow-400 border border-yellow-500/30'}`}>24H</button><button onClick={() => toggleBan(u.id, '7d')} className={`flex-1 py-2 rounded-full text-xs font-bold ${banType === '7d' ? 'bg-orange-600 text-white shadow-lg' : 'bg-[#2d2d2d] text-orange-400 border border-orange-500/30'}`}>7D</button><button onClick={() => toggleBan(u.id, 'eternal')} className={`flex-1 py-2 rounded-full text-xs font-bold ${banType === 'eternal' ? 'bg-red-600 text-white shadow-lg' : 'bg-[#2d2d2d] text-red-400 border border-red-500/30'}`}>ETENO</button></div></div>);
                        })}
                        {page === 'monitor' && (<div className="space-y-4"><h3 className="text-xs font-bold text-gray-500 uppercase ml-1">Mensagens de Suporte</h3>{system.supportMsgs.length === 0 ? (<div className="text-center text-gray-600 text-xs py-4">Nenhuma mensagem recente.</div>) : (system.supportMsgs.map(msg => (<div key={msg.id} className="surface-card p-4 border border-[#2d2d2d]"><div className="flex justify-between text-xs mb-1"><span className="text-blue-400 font-bold">{msg.user}</span><span className="text-gray-500">{msg.time}</span></div><p className="text-sm text-gray-300">{msg.text}</p></div>)))}</div>)}
                        {page === 'sys' && (<div className="surface-card p-8"><h3 className="font-bold mb-6 text-blue-300 text-xl text-center">Modo de Manuten√ß√£o</h3>{system.maintenance ? (<div className="text-center"><div className="mb-4 text-red-400 font-bold animate-pulse">O SITE EST√Å FECHADO ({MAINTENANCE_TYPES[system.maintenanceType].label})</div><button onClick={() => toggleMaintenance()} className="w-full py-4 rounded-full font-bold text-lg bg-green-600 text-white shadow-lg">REABRIR SITE AGORA</button></div>) : (<div className="grid grid-cols-1 gap-3">{Object.entries(MAINTENANCE_TYPES).map(([key, type]) => (<button key={key} onClick={() => toggleMaintenance(key)} className="w-full py-3 px-4 rounded-xl bg-[#2d2d2d] hover:bg-[#353535] flex items-center gap-3 transition-colors text-left group border border-transparent hover:border-blue-500"><div className={`w-10 h-10 rounded-full bg-[#1E1E1E] flex items-center justify-center ${type.color} group-hover:scale-110 transition-transform`}><i className={`fas ${type.icon}`}></i></div><div><div className="text-sm font-bold text-white">{type.label}</div></div></button>))}</div>)}</div>)}
                    </div>
                    <ToastContainer />
                </div>
            );
        }

        function MaintenanceScreen({ system }) {
            const type = MAINTENANCE_TYPES[system.maintenanceType] || MAINTENANCE_TYPES.emergency;
            return (<div className="h-screen flex flex-col items-center justify-center bg-[#121212] text-white p-10 text-center relative overflow-hidden"><div className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 ${type.color.replace('text-', 'bg-')}/10 rounded-full blur-[100px] animate-pulse`}></div><div className="relative z-10 surface-card p-10 border border-white/5"><i className={`fas ${type.icon} text-6xl ${type.color} mb-6 animate-bounce`}></i><h1 className="text-2xl font-bold mb-4 google-font text-white uppercase">Volte mais tarde</h1><p className="text-gray-400 text-lg">Estamos em manuten√ß√£o</p><div className="mt-8 text-[10px] text-gray-600 font-mono">Motivo: {type.label}</div></div></div>);
        }

        function BannedScreen({ user, onLogout }) {
            const [appealText, setAppealText] = useState('');
            const [sent, setSent] = useState(false);
            const handleAppeal = () => { if (!appealText.trim()) return alert("Escreva algo."); setSent(true); };
            return (<div className="h-screen w-screen bg-black flex flex-col items-center justify-center p-6 text-white relative overflow-hidden"><div className="absolute inset-0 bg-red-900/20 z-0"></div><div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-red-600/30 rounded-full blur-[120px] animate-pulse z-0"></div><div className="relative z-10 w-full max-w-sm text-center"><div className="w-32 h-32 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_50px_rgba(220,38,38,0.5)] prison-pulse border-4 border-red-800"><i className="fas fa-lock text-5xl text-black"></i></div><h1 className="text-3xl font-bold mb-2 uppercase tracking-widest text-red-500">Bloqueado</h1><p className="text-gray-400 text-sm mb-8">Sua conta foi detida por violar as regras.<br/>Acesso proibido.</p>{!sent ? (<div className="bg-[#1a1a1a] border border-red-900/50 p-6 rounded-2xl mb-4 text-left"><h3 className="text-red-400 font-bold text-sm mb-2 uppercase flex items-center gap-2"><i className="fas fa-hand-paper"></i> Segunda Chance?</h3><textarea className="w-full bg-black/50 border border-gray-700 rounded-lg p-3 text-sm text-white outline-none focus:border-red-500 transition-colors h-24 resize-none mb-3" placeholder="Justifique seu erro..." value={appealText} onChange={(e) => setAppealText(e.target.value)}></textarea><button onClick={handleAppeal} className="w-full py-3 rounded-lg bg-red-700 hover:bg-red-600 text-white font-bold text-sm transition-colors uppercase tracking-wide shadow-lg">Enviar Pedido</button></div>) : (<div className="bg-green-900/20 border border-green-500/30 p-6 rounded-2xl mb-6"><i className="fas fa-check-circle text-4xl text-green-500 mb-2"></i><h3 className="font-bold text-green-400 mb-2">Pedido Enviado</h3><div className="text-xs text-gray-300 space-y-2 text-left bg-black/40 p-3 rounded"><p>‚è≥ <strong>Prazo de An√°lise:</strong></p><ul className="list-disc pl-4 space-y-1"><li>Caso Simples: <span className="text-yellow-400">~7 dias</span></li><li>Caso Grave: <span className="text-red-400">1 a 2 meses</span></li></ul></div></div>)}<button onClick={onLogout} className="text-gray-500 text-xs hover:text-white underline mt-4">Sair e Voltar para Login</button></div></div>);
        }

        const SupportBadge = ({ plan }) => {
            const [status, setStatus] = useState({ open: false, label: '...', sub: '' });
            useEffect(() => {
                const update = () => {
                    const now = new Date();
                    const day = now.getDay();
                    const h = now.getHours();
                    const isWeekend = day === 0 || day === 6;
                    const isOpen = !isWeekend && h >= 6 && h < 18;
                    const isPaid = plan === 'vip' || plan === 'king';
                    if (isOpen) { setStatus({ open: true, label: 'Online', sub: `Fecha 18h` }); } else { if (isWeekend) { setStatus({ open: isPaid, label: isPaid ? 'Fila VIP' : 'Descanso', sub: isPaid ? 'Prioridade' : 'Volta Seg 06h' }); } else { setStatus({ open: isPaid, label: isPaid ? 'Fila VIP' : 'Offline', sub: isPaid ? 'Prioridade' : 'Volta 06h' }); } }
                };
                update();
                const i = setInterval(update, 60000);
                return () => clearInterval(i);
            }, [plan]);
            return (<div className={`flex items-center gap-3 px-4 py-2 rounded-full border backdrop-blur-md transition-all ${status.open ? 'bg-green-500/10 border-green-500/20' : 'bg-pink-500/10 border-pink-500/20'}`}><div className={`w-2 h-2 rounded-full ${status.open ? 'bg-green-400' : 'bg-pink-500'}`}></div><div className="flex flex-col leading-none"><span className={`text-[10px] font-black uppercase ${status.open ? 'text-green-300' : 'text-pink-300'}`}>SUPORTE {status.label}</span><span className="text-[9px] text-gray-400 font-mono mt-0.5">{status.sub}</span></div></div>);
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>