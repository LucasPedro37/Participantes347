<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participação - Os Mais Mais</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6a5acd; /* Roxo Azulado (SlateBlue) */
            --secondary-color: #007bff; /* Azul Brilhante */
            --dark-blue-color: #0056b3; /* Azul Escuro */
            --success-color: #28a745; /* Verde */
            --warning-color: #ff8c00; /* Laranja */
            --danger-color: #dc3545; /* Vermelho */
            --dark-bg: #12121f;
            --light-bg: #1e1e2f;
            --text-color: #e0e0e0;
            --text-light: #ffffff;
            --border-color: #333;
        }

        body {
            background-color: #000;
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .main-title {
            font-size: 3em;
            font-weight: 700;
            color: var(--text-light);
            text-shadow: 0 0 10px rgba(106, 90, 205, 0.7);
            margin-bottom: 40px;
        }

        .fade-in-up {
            animation: fadeInUp 0.7s ease-out forwards;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-wrapper {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
        }

        #user-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .profile-pic {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--primary-color);
            object-fit: cover;
            cursor: pointer;
        }

        #name-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        #main-content {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        #main-content .button-group {
            display: flex;
            gap: 20px;
            flex-direction: column; 
        }

        .button-group-horizontal {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        #nameInput {
            padding: 15px;
            font-size: 18px;
            border-radius: 25px;
            border: 1px solid var(--border-color);
            background-color: var(--light-bg);
            color: var(--text-light);
            width: 300px;
            text-align: center;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        #nameInput:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px var(--primary-color);
        }

        .btn {
            position: relative;
            color: var(--text-light);
            background: var(--dark-blue-color);
            padding: 20px 40px;
            font-size: 20px;
            font-weight: 600;
            border: none;
            border-radius: 40px;
            outline: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--dark-blue-color), 0 0 30px var(--dark-blue-color);
        }

        .btn-primary {
            /* Herda o estilo do .btn */
        }

        .btn-purple {
            margin-top: 20px;
        }

        .btn-red {
            background: var(--danger-color);
            border-color: var(--danger-color);
        }
        .btn-red:hover {
            box-shadow: 0 0 15px var(--danger-color), 0 0 30px var(--danger-color);
        }

        .btn-info {
            background: var(--secondary-color);
        }
        .btn-info:hover {
            box-shadow: 0 0 15px var(--secondary-color), 0 0 30px var(--secondary-color);
        }

        .btn-warning {
            background: var(--warning-color);
        }
        .btn-warning:hover { box-shadow: 0 0 15px var(--warning-color), 0 0 30px var(--warning-color); }

        #declineOptions {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        #loader {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        /* Novo estilo de Spinner */
        .spinner {
            width: 60px;
            height: 60px;
            border: 8px solid var(--border-color);
            border-top: 8px solid var(--dark-blue-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        #loader-text {
            font-size: 18px;
            transition: opacity 0.5s ease-in-out;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #notification {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px; /* Este pode ser removido, pois a nova notificação é centralizada */
            background-color: #28a745;
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px #28a745;
            font-size: 16px;
        }

        #declineOptions {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 20px;
            border-radius: 15px;
            background-color: rgba(30, 30, 47, 0.7);
            backdrop-filter: blur(5px);
        }
        
        #feedbackMessage {
            display: none;
            text-align: center;
            font-size: 20px;
            padding: 20px 30px;
            border-radius: 8px;
            background-color: var(--light-bg);
            color: var(--dark-blue-color);
            box-shadow: 0 0 15px var(--dark-blue-color);
        }
        
        .option-btn {
            background-color: var(--light-bg);
            color: var(--text-light);
            border: 1px solid var(--border-color);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            width: 280px;
            font-size: 16px;
            transition: all 0.3s ease;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }

        #support-message-container textarea {
            width: 320px;
            height: 120px;
            resize: vertical;
            font-family: 'Poppins', sans-serif;
            padding: 15px;
            font-size: 16px;
            box-sizing: border-box; /* Garante que o padding não aumente a largura */
        }


        .option-btn:hover {
            background-color: #444;
            border-color: var(--dark-blue-color);
            box-shadow: 0 0 8px var(--dark-blue-color);
        }

        .btn-green {
            color: var(--text-light);
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 600;
            border: none;
            border-radius: 30px;
            outline: none;
            background: var(--dark-blue-color);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .btn-orange { background: var(--dark-blue-color); }
        .btn-orange:hover { box-shadow: 0 0 15px var(--dark-blue-color), 0 0 30px var(--dark-blue-color); }

        .btn-green:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--success-color), 0 0 30px var(--success-color);
        }

        footer {
            margin-top: 20px; /* Adicionado para espaçamento */
            padding-bottom: 10px;
            font-size: 12px;
            color: var(--text-color); /* Cor ajustada para o tema */
        }

        #partner-form-container {
            display: none;
            flex-direction: column;
            align-items: center;
            background-color: rgba(30, 30, 47, 0.7);
            padding: 20px; border-radius: 15px; backdrop-filter: blur(5px);
            gap: 15px;
        }

        #partner-form-container input {
            width: 300px;
        }

        #partner-error-message {
            color: var(--danger-color);
            display: none;
        }

        #block-list-container {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            background-color: rgba(30, 30, 47, 0.7);
            padding: 20px; border-radius: 15px; backdrop-filter: blur(5px);
        }

        #blocked-users-list {
            list-style: none;
            padding: 0;
            width: 100%;
            max-width: 320px;
            text-align: center;
            max-height: 150px; /* Altura máxima antes de rolar */
            overflow-y: auto;  /* Adiciona barra de rolagem vertical quando necessário */
            padding-right: 5px; /* Espaço para a barra de rolagem */
        }
        #blocked-users-list li {
            background-color: var(--light-bg);
            padding: 10px; margin-bottom: 5px; border-radius: 5px; border: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: center;
        }
        #blocked-users-list .unblock-btn { background: var(--success-color); color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }

        /* Estilos da Nova Notificação Animada */
        .notification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .notification-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .notification-box {
            background: var(--light-bg);
            padding: 30px 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transform: scale(0.7);
            transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }

        .notification-overlay.show .notification-box {
            transform: scale(1);
        }

        .notification-box h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: var(--success-color);
            font-size: 28px;
        }

        .notification-box p {
            font-size: 18px;
            color: var(--text-color);
        }

        /* Estilos para Notificação de Aviso (Vermelha) */
        .notification-box.warning h3 {
            color: var(--danger-color);
            animation: blink-red 1.5s infinite;
        }
        .notification-box.warning .checkmark {
            stroke: #ff4d4d;
        }

        /* Estilos para Notificação de Informação (Amarela) */
        .notification-box.info h3 {
            color: var(--warning-color);
        }
        .notification-box.info .checkmark {
            stroke: var(--warning-color);
        }

        /* Animação do Ícone de Check */
        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 4;
            stroke: var(--success-color);
            stroke-miterlimit: 10;
            margin: 0 auto;
            box-shadow: inset 0px 0px 0px #4caf50;
        }

        .checkmark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) 0.3s forwards;
        }

        .checkmark-check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        /* Animação do Ícone de Exclamação */
        .exclamation-mark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: none; /* Escondido por padrão */
            stroke-width: 4;
            stroke-miterlimit: 10;
            margin: 0 auto;
        }

        .notification-box.warning .exclamation-mark { stroke: var(--danger-color); }
        .notification-box.info .exclamation-mark { stroke: var(--warning-color); }

        .exclamation-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            animation: stroke-exclamation-circle 0.6s cubic-bezier(0.65, 0, 0.45, 1) 0.3s forwards;
        }

        .exclamation-line {
            stroke-dasharray: 17;
            stroke-dashoffset: 17;
            animation: stroke-exclamation-line 0.2s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        .exclamation-dot {
            stroke-dasharray: 2;
            stroke-dashoffset: 2;
            animation: stroke-exclamation-dot 0.2s cubic-bezier(0.65, 0, 0.45, 1) 1s forwards;
        }

        @keyframes stroke-exclamation-circle { 100% { stroke-dashoffset: 0; } }
        @keyframes stroke-exclamation-line { 100% { stroke-dashoffset: 0; } }
        @keyframes stroke-exclamation-dot { 100% { stroke-dashoffset: 0; } }

        .notification-overlay.show .notification-box.warning,
        .notification-overlay.show .notification-box.info {
            animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
        }


        @keyframes wave {
            0%, 40%, 100% {
                transform: translateY(0);
            }
            20% {
                transform: translateY(-20px);
            }
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0) scale(1); }
            20%, 80% { transform: translate3d(2px, 0, 0) scale(1); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0) scale(1); }
            40%, 60% { transform: translate3d(4px, 0, 0) scale(1); }
        }

        @keyframes blink-red {
            0%, 100% { color: var(--danger-color); text-shadow: 0 0 10px var(--danger-color); }
            50% { color: #ff7b7b; text-shadow: none; } /* Um tom mais claro de vermelho */
        }

        /* --- Media Queries para Responsividade --- */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.2em;
                text-align: center;
                margin-bottom: 30px;
            }

            .content-wrapper {
                padding: 0 20px;
                width: 100%;
                box-sizing: border-box;
            }

            #nameInput, .option-btn, #partner-form-container input {
                width: 90%;
                max-width: 320px;
            }

            .btn {
                font-size: 16px;
                padding: 15px 25px;
            }

            .notification-box {
                width: 90%;
                padding: 25px;
            }

            footer {
                position: relative;
                margin-top: 30px;
            }
        }

    </style>
</head>
<body>

    <div id="maintenance-container" style="display: none;">
        <h1>Site em Manutenção</h1>
        <p>Estamos trabalhando para melhorar sua experiência. Voltamos em breve!</p>
    </div>


    <h1 class="main-title">Participação - Os Mais Mais</h1>

    <div class="content-wrapper">
        <div id="name-container" class="fade-in-up">
            <h2>Bem-vindo(a)! Qual é o seu nome?</h2>
            <input type="text" id="nameInput" placeholder="Digite seu nome aqui">
            <button id="confirmNameButton" class="btn btn-primary">Confirmar</button>
        </div>

        <div id="main-content">
            <div id="user-header">
                <img src="https://i.imgur.com/V4RclNb.png" id="profile-pic" class="profile-pic" alt="Foto de Perfil">
                <h2 id="welcomeMessage"></h2>
            </div>
            <div class="button-group">
                <button id="actionButton" class="btn btn-primary">Participar</button>
                <button id="partnerButton" class="btn btn-orange">Escolher um Parceiro</button>
                <button id="showPartnerButton" class="btn btn-info">Qual Parceiro eu escolhi?</button>
                <button id="declineButton" class="btn btn-purple">Não quero participar</button>
                <button id="blockButton" class="btn btn-red">Bloquear Pessoas</button>
                <button id="maintenanceButton" class="btn btn-warning" style="display: none;">Manutenção</button>
            </div>
            <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
        </div>

        <div id="partner-form-container">
            <h2>Dados do Parceiro</h2>
            <p style="color: var(--warning-color); font-size: 14px; margin-bottom: 10px; text-align: center;">É obrigatoriamente você colocar o Instagram</p>
            <input type="text" id="partnerNameInput" class="option-btn" placeholder="Nome do parceiro">
            <input type="number" id="partnerAgeInput" class="option-btn" placeholder="Idade do parceiro" min="1" inputmode="numeric">
            <input type="text" id="partnerInstagramInput" class="option-btn" placeholder="Instagram do parceiro (sem @)">
            <div class="button-group-horizontal">
                <button id="partnerConfirmButton" class="btn-green">Concluir</button>
                <button id="backFromPartnerButton" class="btn btn-primary">Voltar</button>
            </div>
        </div>

        <div id="block-list-container">
            <h2>Bloquear Pessoas</h2>
            <input type="text" id="blockNameInput" class="option-btn" placeholder="Nome da pessoa a bloquear">
            <input type="number" id="blockAgeInput" class="option-btn" placeholder="Idade da pessoa a bloquear" min="1" inputmode="numeric">
            <input type="text" id="blockInstagramInput" class="option-btn" placeholder="Instagram da pessoa a bloquear (sem @)">
            <button id="addBlockButton" class="btn btn-red">Bloquear</button>
            <h3 id="blocked-list-title" style="display: none; margin-top: 10px;">Pessoas Bloqueadas:</h3>
            <ul id="blocked-users-list"></ul>
            <button id="backFromBlockButton" class="btn btn-primary">Voltar</button>
        </div>

        <div id="declineOptions" style="display: none;">
            <h2 style="margin-bottom: 10px;">Mandar mensagem para o suporte</h2>
            <div id="optionBugs" class="option-btn">1. Bugs</div>
            <div id="optionError" class="option-btn">2. Muito erro</div>
            <div id="optionFeatures" class="option-btn">3. Precisa de mais funções</div>
            <div id="optionOthers" class="option-btn">4. Outros</div>
            <div id="optionWrite" class="option-btn">5. Escrever para o suporte</div>
            <button id="backFromDeclineButton" class="btn btn-primary" style="margin-top: 15px;">Voltar</button>
        </div>

        <div id="support-message-container" style="display: none; flex-direction: column; align-items: center; gap: 15px; background-color: rgba(30, 30, 47, 0.7); padding: 20px; border-radius: 15px; backdrop-filter: blur(5px);">
            <h2 style="margin-bottom: 5px;">Escreva sua mensagem</h2>
            <textarea id="supportMessageText" class="option-btn" placeholder="Sua mensagem aqui..." rows="5"></textarea>
            <div class="button-group-horizontal">
                <button id="sendSupportMessageButton" class="btn-green">Enviar</button>
                <button id="backFromSupportMessageButton" class="btn btn-primary">Voltar</button>
            </div>
        </div>

        <div id="loader">
            <div class="spinner"></div>
            <p id="loader-text">Analisando seus dados...</p>
        </div>

        <div id="feedbackMessage" style="display: none;">
            Obrigado pelo Feedback!
        </div>
    </div>

    <div id="notification" style="display: none;">
        Você já está participando!
    </div>

    <div id="animated-notification" class="notification-overlay">
        <div class="notification-box">
            <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>
            <svg class="exclamation-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="exclamation-circle" cx="26" cy="26" r="25" fill="none"/>
                <line class="exclamation-line" x1="26" y1="15" x2="26" y2="32" stroke-linecap="round"/>
                <line class="exclamation-dot" x1="26" y1="37" x2="26.01" y2="37" stroke-linecap="round"/>
            </svg>
            <h3 id="notification-title">Sucesso!</h3>
            <p id="notification-message">Sua ação foi concluída.</p>
        </div>
    </div>

    <!-- Diálogo de Confirmação -->
    <div id="confirmation-dialog" class="notification-overlay">
        <div class="notification-box">
            <h3 id="confirmation-title" style="color: var(--warning-color);">Confirmar Ação</h3>
            <p id="confirmation-message">Tem certeza?</p>
            <div class="button-group-horizontal" style="margin-top: 20px; gap: 20px;">
                <button id="confirm-yes-button" class="btn btn-red">Sim</button>
                <button id="confirm-no-button" class="btn btn-primary">Não</button>
            </div>
        </div>
    </div>

    <!-- Diálogo de Informação do Parceiro -->
    <div id="partner-info-dialog" class="notification-overlay">
        <div class="notification-box">
            <h3 id="partner-info-title" style="color: var(--warning-color);">Seu Parceiro Escolhido</h3>
            <div id="partner-info-details" style="margin-bottom: 20px;">
                <!-- Os detalhes do parceiro serão inseridos aqui pelo JavaScript -->
            </div>
            <button id="partner-info-back-button" class="btn btn-primary">Voltar</button>
        </div>
    </div>


    <footer>
        <p>Criado por @lucaspedro!</p>
        <p style="margin-top: 8px; font-size: 11px; color: var(--text-color);">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-shield-lock-fill" viewBox="0 0 16 16" style="vertical-align: -2px; margin-right: 4px;"><path fill-rule="evenodd" d="M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.19.829.19s.548-.058.829-.19c.304-.143.662-.352 1.048-.625a11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.468 62.468 0 0 0-2.887-.87C9.843.265 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z"/></svg>
            Sua conta é protegida. Nem mesmo o administrador pode acessar seus dados pessoais.
        </p>
    </footer>

    <script>
        const nameContainer = document.getElementById('name-container');
        const nameInput = document.getElementById('nameInput');
        const confirmNameButton = document.getElementById('confirmNameButton');
        const mainContent = document.getElementById('main-content');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const actionButton = document.getElementById('actionButton');
        const partnerButton = document.getElementById('partnerButton');
        const showPartnerButton = document.getElementById('showPartnerButton'); 
        const maintenanceButton = document.getElementById('maintenanceButton');
        const blockButton = document.getElementById('blockButton');
        const partnerFormContainer = document.getElementById('partner-form-container');
        const partnerNameInput = document.getElementById('partnerNameInput');
        const partnerAgeInput = document.getElementById('partnerAgeInput');
        const partnerInstagramInput = document.getElementById('partnerInstagramInput');
        const partnerConfirmButton = document.getElementById('partnerConfirmButton');
        const backFromPartnerButton = document.getElementById('backFromPartnerButton');
        const loader = document.getElementById('loader');
        const notification = document.getElementById('notification');
        const declineButton = document.getElementById('declineButton');
        const declineOptions = document.getElementById('declineOptions');
        const optionBugs = document.getElementById('optionBugs');
        const optionError = document.getElementById('optionError');
        const optionFeatures = document.getElementById('optionFeatures');
        const optionOthers = document.getElementById('optionOthers');
        const optionWrite = document.getElementById('optionWrite');
        const backFromDeclineButton = document.getElementById('backFromDeclineButton');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const animatedNotification = document.getElementById('animated-notification');
        const loaderText = document.getElementById('loader-text');
        const blockListContainer = document.getElementById('block-list-container');
        const blockAgeInput = document.getElementById('blockAgeInput');
        const blockInstagramInput = document.getElementById('blockInstagramInput');
        const blockNameInput = document.getElementById('blockNameInput');
        const addBlockButton = document.getElementById('addBlockButton');
        const blockedUsersList = document.getElementById('blocked-users-list');
        const backFromBlockButton = document.getElementById('backFromBlockButton');
        const blockedListTitle = document.getElementById('blocked-list-title');
        const maintenanceContainer = document.getElementById('maintenance-container');
        const confirmationDialog = document.getElementById('confirmation-dialog');
        const confirmationMessage = document.getElementById('confirmation-message');
        const confirmYesButton = document.getElementById('confirm-yes-button');
        const confirmNoButton = document.getElementById('confirm-no-button');
        const partnerInfoDialog = document.getElementById('partner-info-dialog');
        const partnerInfoDetails = document.getElementById('partner-info-details');
        const partnerInfoBackButton = document.getElementById('partner-info-back-button');
        const profilePic = document.getElementById('profile-pic');
        const profilePicInput = document.getElementById('profilePicInput');
        const supportMessageContainer = document.getElementById('support-message-container');
        const supportMessageText = document.getElementById('supportMessageText');
        const sendSupportMessageButton = document.getElementById('sendSupportMessageButton');
        const backFromSupportMessageButton = document.getElementById('backFromSupportMessageButton');

        function resetPage() {
            // Esconde todos os elementos de interação
            loader.style.display = 'none';
            notification.style.display = 'none';
            declineOptions.style.display = 'none';
            blockListContainer.style.display = 'none';
            blockListContainer.classList.remove('fade-in-up');
            feedbackMessage.style.display = 'none';
            partnerFormContainer.style.display = 'none';
            supportMessageContainer.style.display = 'none';
            // Mostra o conteúdo principal
            mainContent.style.display = 'flex';
            mainContent.classList.add('fade-in-up');
        }

        function showAnimatedNotification(title, message, type = 'success') {
            const notificationBox = animatedNotification.querySelector('.notification-box');
            document.getElementById('notification-title').textContent = title;
            document.getElementById('notification-message').innerHTML = message;

            const checkmark = animatedNotification.querySelector('.checkmark');
            const exclamationMark = animatedNotification.querySelector('.exclamation-mark');

            // Remove classes antigas e adiciona a nova
            notificationBox.classList.remove('success', 'warning', 'info');
            if (type === 'warning') {
                notificationBox.classList.add('warning');
                checkmark.style.display = 'none';
                exclamationMark.style.display = 'block';
            } else if (type === 'info') {
                notificationBox.classList.add('info');
                checkmark.style.display = 'none';
                exclamationMark.style.display = 'block';
            } else {
                notificationBox.classList.add('success'); // Classe padrão
                checkmark.style.display = 'block';
                exclamationMark.style.display = 'none';
            }

            // Reinicia a animação clonando o nó
            const newCheckmark = checkmark.cloneNode(true);
            checkmark.parentNode.replaceChild(newCheckmark, checkmark);

            const newExclamationMark = exclamationMark.cloneNode(true);
            exclamationMark.parentNode.replaceChild(newExclamationMark, exclamationMark);

            animatedNotification.classList.add('show');
            setTimeout(() => {
                animatedNotification.classList.remove('show');
            }, 2700); // Deixa a notificação visível por 2.7s
        }

        function showMainContent(name) {
            nameContainer.style.display = 'none';
            welcomeMessage.textContent = `Olá, ${name}!`;
            mainContent.style.display = 'flex';
            mainContent.classList.add('fade-in-up');

            // Mostra o botão de visitantes apenas para o admin
            const isAdmin = name.toLowerCase() === 'lucaspedro';
            if (isAdmin) {
                maintenanceButton.style.display = 'block';
            } else {
                maintenanceButton.style.display = 'none';
            }
        }

        // Carrega a foto de perfil do localStorage
        function loadProfilePicture() {
            const savedPic = localStorage.getItem('profilePicture');
            if (savedPic) {
                profilePic.src = savedPic;
            }
        }

        // Verifica se o nome já está salvo no carregamento da página
        window.addEventListener('load', () => {
            const savedName = localStorage.getItem('userName');
            if (savedName) {
                const isAdmin = savedName.toLowerCase() === 'lucaspedro';
                const maintenanceMode = localStorage.getItem('maintenanceMode') === 'on';

                if (maintenanceMode && !isAdmin) {
                    // Se manutenção está ON e não é admin, mostra a tela de manutenção
                    document.querySelector('.content-wrapper').style.display = 'none';
                    document.querySelector('.main-title').style.display = 'none';
                    document.querySelector('footer').style.display = 'none';
                    maintenanceContainer.style.display = 'flex';
                    return; // Para a execução
                }
            }
            // Se não estiver em manutenção ou se for admin, continua normal
            if (savedName) {
                loadProfilePicture();
                showMainContent(savedName);
            } else {
                nameContainer.style.display = 'flex';
                showAnimatedNotification('Atenção!', 'Escolha seu nome apenas 1 vez.', 'info');
            }
        });
        confirmNameButton.addEventListener('click', () => {
            const userName = nameInput.value.trim();
            if (userName) {
                localStorage.setItem('userName', userName);
                // Recarrega a página para aplicar a lógica de manutenção corretamente
                window.location.reload();
            }
        });

        // Evento para abrir o seletor de arquivos ao clicar na foto
        profilePic.addEventListener('click', () => {
            profilePicInput.click();
        });

        // Evento para quando um arquivo for selecionado
        profilePicInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imageDataUrl = e.target.result;
                    profilePic.src = imageDataUrl;
                    localStorage.setItem('profilePicture', imageDataUrl);
                    showAnimatedNotification('Sucesso!', 'Sua foto de perfil foi atualizada.', 'success');
                };
                reader.readAsDataURL(file);
            }
        });

        actionButton.addEventListener('click', () => {
            // Verifica se o usuário já participou
            if (localStorage.getItem('hasParticipated') === 'true') {
                showAnimatedNotification('Aviso!', 'Você já participou e não precisa acessar novamente', 'info');
                return; // Para a execução
            }

            // Se for a primeira vez, continua com a lógica normal
            mainContent.style.display = 'none';
            loader.style.display = 'flex';

            const loadingMessages = [
                "Analisando seus dados...",
                "Verificando compatibilidade...",
                "Otimizando parâmetros...",
                "Finalizando..."
            ];
            let messageIndex = 0;
            loaderText.textContent = loadingMessages[messageIndex];

            const messageInterval = setInterval(() => {
                messageIndex = (messageIndex + 1) % loadingMessages.length;
                loaderText.style.opacity = 0;
                setTimeout(() => { loaderText.textContent = loadingMessages[messageIndex]; loaderText.style.opacity = 1; }, 500);
            }, 2500);

            setTimeout(() => {
                loader.style.display = 'none';
                clearInterval(messageInterval); // Garante que o intervalo de mensagens pare

                // Marca que o usuário já participou
                localStorage.setItem('hasParticipated', 'true');

                showAnimatedNotification('Sucesso!', 'Você já está participando!');
                setTimeout(() => {
                    resetPage();
                }, 3000); // Volta ao início após 3 segundos
            }, 10000); // 10 segundos para o loader
        });

        declineButton.addEventListener('click', () => {
            mainContent.style.display = 'none';
            mainContent.classList.remove('fade-in-up');
            declineOptions.style.display = 'flex';
            declineOptions.classList.add('fade-in-up');
        });

        function showPartnerForm() {
            mainContent.style.display = 'none';
            mainContent.classList.remove('fade-in-up');
            partnerFormContainer.style.display = 'flex';
            partnerFormContainer.classList.add('fade-in-up');
        }

        partnerButton.addEventListener('click', () => {
            if (localStorage.getItem('hasAddedPartner') === 'true') {
                document.getElementById('confirmation-title').textContent = 'Trocar de Parceiro?';
                confirmationMessage.textContent = 'Você já tem um parceiro. Deseja trocá-lo por um novo?';
                confirmationDialog.classList.add('show');

                confirmYesButton.onclick = () => {
                    confirmationDialog.classList.remove('show');
                    showPartnerForm();
                };
                confirmNoButton.onclick = () => confirmationDialog.classList.remove('show');
            } else {
                showPartnerForm();
            }
        });

        showPartnerButton.addEventListener('click', () => {
            const partnerDataString = localStorage.getItem('partnerData');
            if (partnerDataString) {
                const partnerData = JSON.parse(partnerDataString);
                const message = `
                    <p style="text-align: left; line-height: 1.6;">
                        <strong>Nome:</strong> ${partnerData.name}<br>
                        <strong>Idade:</strong> ${partnerData.age}<br>
                        <strong>Instagram:</strong> @${partnerData.instagram}
                    </p>`;
                partnerInfoDetails.innerHTML = message;
                partnerInfoDialog.classList.add('show');
            } else {
                showAnimatedNotification('Aviso!', 'Você ainda não escolheu um parceiro.', 'info');
            }
        });

        partnerInfoBackButton.addEventListener('click', () => {
            partnerInfoDialog.classList.remove('show');
        });

        partnerConfirmButton.addEventListener('click', () => {
            const age = parseInt(partnerAgeInput.value, 10);
            const name = partnerNameInput.value.trim();
            const instagram = partnerInstagramInput.value.trim();

            if (!name || !age || !instagram) {
                showAnimatedNotification('Atenção!', 'Por favor, preencha todos os campos.', 'info');
                return;
            }

            // --- NEW BLOCKING CHECK ---
            const blockedUsers = getBlockedUsers();
            // Check if the potential partner's name is in the blocked list (case-insensitive)
            const isPartnerBlocked = blockedUsers.some(blockedUser => blockedUser.name.toLowerCase() === name.toLowerCase());

            if (isPartnerBlocked) {
                showAnimatedNotification('Atenção!', `'${name}' está na sua lista de bloqueio. Você não pode escolher esta pessoa como parceiro.`, 'warning');
                return; // Prevent adding partner if blocked
            }
            // --- END NEW BLOCKING CHECK ---
            if (age >= 30) {
                showAnimatedNotification('Erro!', 'A idade não pode ser 30 anos ou mais.', 'warning');
            } else {
                const partnerData = {
                    name: name,
                    age: age,
                    instagram: instagram
                };
                localStorage.setItem('partnerData', JSON.stringify(partnerData));
                localStorage.setItem('hasAddedPartner', 'true'); // Mantendo para compatibilidade
                partnerFormContainer.style.display = 'none';
                partnerFormContainer.classList.remove('fade-in-up');
                partnerNameInput.value = '';
                partnerAgeInput.value = '';
                partnerInstagramInput.value = '';
                showAnimatedNotification('Concluído!', 'Parceiro adicionado com sucesso!');
                setTimeout(() => {
                    resetPage();
                }, 3000);
            }
        });

        backFromPartnerButton.addEventListener('click', () => {
            partnerFormContainer.style.display = 'none';
            partnerFormContainer.classList.remove('fade-in-up');
            mainContent.style.display = 'flex';
            mainContent.classList.add('fade-in-up');
        });

        function handleSupportOptionClick() {
            declineOptions.style.display = 'none';
            declineOptions.classList.remove('fade-in-up');
            showAnimatedNotification('Obrigado!', 'Seu feedback foi enviado.');
            setTimeout(() => {
                resetPage();
            }, 3000);
        }

        optionBugs.addEventListener('click', handleSupportOptionClick);
        optionError.addEventListener('click', handleSupportOptionClick);
        optionFeatures.addEventListener('click', handleSupportOptionClick);
        optionOthers.addEventListener('click', handleSupportOptionClick);

        optionWrite.addEventListener('click', () => {
            declineOptions.style.display = 'none';
            declineOptions.classList.remove('fade-in-up');
            supportMessageContainer.style.display = 'flex';
            supportMessageContainer.classList.add('fade-in-up');
        });

        sendSupportMessageButton.addEventListener('click', () => {
            const message = supportMessageText.value.trim();
            if (message) {
                // Lógica para enviar a mensagem (aqui apenas simulamos)
                console.log('Mensagem de suporte enviada:', message);
                supportMessageText.value = ''; // Limpa o campo
                supportMessageContainer.style.display = 'none';
                showAnimatedNotification('Obrigado!', 'Sua mensagem foi enviada com sucesso.');
                setTimeout(resetPage, 3000);
            } else {
                showAnimatedNotification('Atenção!', 'Por favor, escreva uma mensagem antes de enviar.', 'info');
            }
        });

        backFromSupportMessageButton.addEventListener('click', () => {
            supportMessageContainer.style.display = 'none';
            declineOptions.style.display = 'flex'; // Volta para as opções de suporte
        });


        backFromDeclineButton.addEventListener('click', () => {
            declineOptions.style.display = 'none';
            declineOptions.classList.remove('fade-in-up');
            resetPage();
        });

        // Helper function to get blocked users from localStorage
        function getBlockedUsers() {
            const blockedUsersString = localStorage.getItem('blockedUsers');
            return blockedUsersString ? JSON.parse(blockedUsersString) : [];
        }

        // Helper function to save blocked users to localStorage
        function saveBlockedUsers(users) {
            localStorage.setItem('blockedUsers', JSON.stringify(users));
        }

        function renderBlockedUsers() {
            const blockedUsers = getBlockedUsers();
            blockedUsersList.innerHTML = '';
            if (blockedUsers.length > 0) {
                blockedListTitle.style.display = 'block';
                blockedUsers.forEach(user => {
                    const li = document.createElement('li'); // Cria o item da lista
                    const span = document.createElement('span'); // Cria o texto
                    span.textContent = `${user.name} (Idade: ${user.age}, IG: @${user.instagram})`;

                    const unblockBtn = document.createElement('button'); // Cria o botão
                    unblockBtn.textContent = 'Desbloquear';
                    unblockBtn.className = 'unblock-btn';

                    unblockBtn.addEventListener('click', () => { // Adiciona o evento de clique
                        const nameToUnblock = user.name;
                        let currentBlocked = getBlockedUsers();
                        currentBlocked = currentBlocked.filter(blockedUser => blockedUser.name !== nameToUnblock);
                        saveBlockedUsers(currentBlocked);
                        renderBlockedUsers(); // Re-render the list
                        showAnimatedNotification('Sucesso!', `'${nameToUnblock}' foi desbloqueado.`);
                    });

                    li.appendChild(span);
                    li.appendChild(unblockBtn); // Adiciona o botão ao item da lista
                    blockedUsersList.appendChild(li);
                });
            } else {
                blockedListTitle.style.display = 'none';
            }
        }
        
        blockButton.addEventListener('click', () => {
            mainContent.style.display = 'none';
            mainContent.classList.remove('fade-in-up');
            blockListContainer.style.display = 'flex';
            blockListContainer.classList.add('fade-in-up');
            renderBlockedUsers();
        });

        addBlockButton.addEventListener('click', () => {
            const nameToBlock = blockNameInput.value.trim(); // Changed from 'blockNameInput' to 'blockNameInput'
            const ageToBlock = parseInt(blockAgeInput.value, 10);
            const instagramToBlock = blockInstagramInput.value.trim();

            if (!nameToBlock || !ageToBlock || !instagramToBlock) {
                showAnimatedNotification('Atenção!', 'Por favor, preencha todos os campos para bloquear.', 'info');
                return;
            }

            const userName = localStorage.getItem('userName');
            if (nameToBlock.toLowerCase() === userName.toLowerCase()) {
                showAnimatedNotification('Atenção!', 'Você não pode bloquear a si mesmo.', 'warning');
                return;
            }
            
            let blockedUsers = getBlockedUsers();
            // Check if the person is already blocked by name (case-insensitive)
            if (blockedUsers.some(user => user.name.toLowerCase() === nameToBlock.toLowerCase())) {
                showAnimatedNotification('Aviso!', `'${nameToBlock}' já está na lista de bloqueio.`, 'info');
                return;
            }

            confirmationMessage.textContent = `Tem certeza que você deseja bloquear "${nameToBlock}" (Idade: ${ageToBlock}, Instagram: @${instagramToBlock})?`;
            confirmationDialog.classList.add('show');

            confirmYesButton.onclick = () => {
                const blockedPerson = {
                    name: nameToBlock,
                    age: ageToBlock,
                    instagram: instagramToBlock
                };
                blockedUsers.push(blockedPerson);
                saveBlockedUsers(blockedUsers);
                renderBlockedUsers();
                blockNameInput.value = ''; // Clear input fields
                blockAgeInput.value = '';
                blockInstagramInput.value = '';
                confirmationDialog.classList.remove('show');
                showAnimatedNotification('Bloqueado!', `'${nameToBlock}' foi adicionado à lista de bloqueio.`);
            };

            confirmNoButton.onclick = () => confirmationDialog.classList.remove('show');
        });

        backFromBlockButton.addEventListener('click', () => {
            resetPage();
        });

        maintenanceButton.addEventListener('click', () => {
            const maintenanceMode = localStorage.getItem('maintenanceMode');
            if (maintenanceMode === 'on') {
                localStorage.setItem('maintenanceMode', 'off');
                showAnimatedNotification('Manutenção Desativada', 'O site está online para todos.', 'success');
            } else {
                localStorage.setItem('maintenanceMode', 'on');
                showAnimatedNotification('Manutenção Ativada', 'Apenas você pode acessar o site.', 'warning');
            }
            setTimeout(() => {
                window.location.reload();
            }, 3000);
        });
    </script>

</body>
</html>